<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dashboard Segmentasi Profesi MBR</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-gray-100 font-sans">

  <!-- Header -->
  <header class="bg-green-700 text-white p-6 text-center">
    <h1 class="text-2xl font-bold">Dashboard Segmentasi Profesi MBR</h1>
  </header>

  <!-- Filters Umum -->
  <section class="bg-green-100 p-4 flex flex-wrap gap-4 justify-center">
    <select class="p-2 rounded border w-40">
      <option>Semua Profesi</option>
      <option>Petani</option>
      <option>Guru</option>
    </select>
    <select class="p-2 rounded border w-40">
      <option>Semua Bank</option>
      <option>Bank BTN</option>
      <option>Bank BRI</option>
    </select>
    <select class="p-2 rounded border w-40">
      <option>Semua Provinsi</option>
      <option>Jawa Tengah</option>
      <option>Jawa Barat</option>
    </select>
    <select class="p-2 rounded border w-40">
      <option>Semua Kab/Kota</option>
      <option>Klaten</option>
      <option>Bandung</option>
    </select>
  </section>

  <!-- Stats -->
  <section class="flex flex-wrap justify-center gap-6 p-6">
    <div class="bg-white shadow-md rounded-lg p-4 w-64 text-center">
      <h2 class="text-green-700 text-2xl font-bold">12.345</h2>
      <p class="text-gray-600">Total Unit</p>
    </div>
    <div class="bg-white shadow-md rounded-lg p-4 w-64 text-center">
      <h2 class="text-green-700 text-2xl font-bold">Rp 400 M</h2>
      <p class="text-gray-600">Total FLPP</p>
    </div>
    <div class="bg-white shadow-md rounded-lg p-4 w-64 text-center">
      <h2 class="text-green-700 text-2xl font-bold">15</h2>
      <p class="text-gray-600">Jumlah Bank</p>
    </div>
    <div class="bg-white shadow-md rounded-lg p-4 w-64 text-center">
      <h2 class="text-green-700 text-2xl font-bold">22</h2>
      <p class="text-gray-600">Profesi Terdaftar</p>
    </div>
  </section>

  <!-- Chart -->
  <section class="px-6">
    <div class="bg-white rounded shadow p-4">
      <h2 class="text-lg font-semibold mb-4 text-gray-700">Distribusi Unit per Profesi</h2>
      <canvas id="barChart" height="100"></canvas>
    </div>
  </section>

  <!-- Tabel Data -->
  <section class="p-6 overflow-x-auto">
    <table id="dataTable" class="w-full bg-white rounded shadow-md">
      <thead class="bg-green-200 text-gray-700">
        <tr>
          <th class="p-3 text-sm">No</th>
          <th class="p-3 text-sm">
            <select class="filter-column" data-index="1">
              <option value="">Profesi</option>
              <option value="Petani">Petani</option>
              <option value="Guru">Guru</option>
            </select>
          </th>
          <th class="p-3 text-sm">
            <select class="filter-column" data-index="2">
              <option value="">Bank</option>
              <option value="Bank BRI">Bank BRI</option>
              <option value="Bank BTN">Bank BTN</option>
            </select>
          </th>
          <th class="p-3 text-sm">
            <select class="filter-column" data-index="3">
              <option value="">Provinsi</option>
              <option value="Jawa Tengah">Jawa Tengah</option>
              <option value="Jawa Barat">Jawa Barat</option>
            </select>
          </th>
          <th class="p-3 text-sm">
            <select class="filter-column" data-index="4">
              <option value="">Kab/Kota</option>
              <option value="Klaten">Klaten</option>
              <option value="Bandung">Bandung</option>
            </select>
          </th>
          <th class="p-3 text-sm">Unit</th>
          <th class="p-3 text-sm">Nilai FLPP</th>
        </tr>
      </thead>
      <tbody class="text-center">
        <tr>
          <td class="p-3">1</td>
          <td class="p-3">Petani</td>
          <td class="p-3">Bank BRI</td>
          <td class="p-3">Jawa Tengah</td>
          <td class="p-3">Klaten</td>
          <td class="p-3">250</td>
          <td class="p-3">Rp 8.500.000.000</td>
        </tr>
        <tr>
          <td class="p-3">2</td>
          <td class="p-3">Guru</td>
          <td class="p-3">Bank BTN</td>
          <td class="p-3">Jawa Barat</td>
          <td class="p-3">Bandung</td>
          <td class="p-3">180</td>
          <td class="p-3">Rp 6.200.000.000</td>
        </tr>
      </tbody>
    </table>
  </section>

  <!-- Script Chart + Filter Tabel -->
  <script>
    // Chart.js untuk bar chart
    const ctx = document.getElementById('barChart').getContext('2d');
    const barChart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: ['Petani', 'Guru'],
        datasets: [{
          label: 'Jumlah Unit',
          data: [250, 180],
          backgroundColor: ['#48bb78', '#2f855a']
        }]
      },
      options: {
        responsive: true,
        scales: {
          y: { beginAtZero: true }
        }
      }
    });

    // Filter per kolom tabel
    document.querySelectorAll('.filter-column').forEach(select => {
      select.addEventListener('change', () => {
        const table = document.getElementById('dataTable');
        const rows = table.querySelectorAll('tbody tr');
        const filters = {};

        document.querySelectorAll('.filter-column').forEach(sel => {
          if (sel.value !== "") {
            filters[sel.dataset.index] = sel.value.toLowerCase();
          }
        });

        rows.forEach(row => {
          let visible = true;
          Object.keys(filters).forEach(index => {
            const cell = row.cells[index];
            if (!cell.textContent.toLowerCase().includes(filters[index])) {
              visible = false;
            }
          });
          row.style.display = visible ? "" : "none";
        });
      });
    });
  </script>

</body>
</html>
